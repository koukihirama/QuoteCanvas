<div class="max-w-md mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">📚 書籍を検索</h1>

  <%= form_with url: search_book_infos_path, method: :get, local: true, class: "space-y-4" do |f| %>
    <div>
      <%= f.label :q, "タイトルやキーワード", class: "block font-semibold mb-1" %>
      <%= f.text_field :q, value: params[:q], class: "input input-bordered w-full" %>
    </div>
    <%= f.submit "検索する", class: "btn btn-primary w-full" %>
  <% end %>

  <% if params[:q].present? %>
    <div class="mt-6">
      <h2 class="text-lg font-semibold mb-2">検索結果</h2>

      <% if @results.any? %>
        <ul class="space-y-4">
          <% @results.each do |book| %>
            <li class="p-4 border rounded-lg">
              <div class="font-bold"><%= book[:title] %></div>
              <div class="text-sm opacity-70"><%= book[:authors]&.join(", ") %></div>
              <div class="text-xs opacity-60"><%= book[:published_date] %></div>
              <% if book[:cover_url].present? %>
                <img src="<%= book[:cover_url] %>" alt="<%= book[:title] %>" class="mt-2 w-24" />
              <% end %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-sm opacity-70">該当する書籍が見つかりませんでした。</p>
      <% end %>
    </div>
  <% end %>
</div>